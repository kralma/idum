{"version":3,"sources":["app.js","config.js","routes.js","controllers/dialogCtrl.js","controllers/headerCtrl.js","controllers/projectCtrl.js","controllers/sensorDataCtrl.js","controllers/userCtrl.js","directives/graph.js","directives/modalDialog.js","directives/notificationDialog.js","services/dialogService.js","services/projectService.js","services/sensorDataService.js","services/sensorService.js","services/userService.js","templates.js"],"names":["angular","module","app","constant","config","$routeProvider","$locationProvider","when","controller","templateUrl","html5Mode","$scope","$rootScope","DialogService","$on","flashNotifications","dialogs","$location","$filter","scope","next","current","ProjectService","getProjects","then","response","projects","data","createProject","project","sendPositiveNotification","path","projectId","SensorDataService","$routeParams","getProject","getExtendedData","sensor","showExtended","getSensorData","sensorId","allValues","UserService","currentUser","loggedUser","login","console","log","user","sendNegativeNotification","register","directive","$window","restrict","replace","transclude","template","link","elem","attrs","updateGraph","width","clientWidth","height","svgElement","firstChild","setAttribute","valueMin","value","valueMax","key","hasOwnProperty","first","dataLength","length","last","dateInitial","dateInsert","dateEnd","dateRange","valueRange","stepX","stepY","points","d","x","y","innerHTML","$watch","element","bind","shown","action","negativeAction","btns","outputObject","dialogTexts","title","content","spinner","preventClose","positiveLabel","positiveBtn","label","class","positiveClass","negativeLabel","negativeBtn","negativeClass","document","addEventListener","event","keyCode","$apply","close","service","addFlashNotification","flashNotification","timeout","forEach","setTimeout","push","$broadcast","createDialog","dialog","type","sendNeutralNotification","sendInfoNotification","createLoadingDialog","createConfirmDialog","createDecisionDialog","positiveAction","restUrlPrefix","$http","method","url","setSensorData","createSensor","getProjectSensors","$templateCache","put"],"mappings":"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","file":"app.min.js","sourcesContent":["(function (angular) {\n    angular.module(\"app\", ['ngRoute', 'textAngular', 'pascalprecht.translate', 'ngCookies', 'ui.bootstrap', 'ngFileUpload']);\n})(angular);","(function (angular) {\n    var app = angular.module(\"app\");\n    app.constant(\"restUrlPrefix\", \"api/\");\n})(angular);","(function (angular) {\n    angular.module('app').config([\"$routeProvider\", \"$locationProvider\", function ($routeProvider, $locationProvider) {\n        $routeProvider.when('/login', {\n            controller: 'UserCtrl',\n            templateUrl: '/idum-ui/app/templates/login.tmpl.html'\n        });\n        $routeProvider.when('/register', {\n            controller: 'UserCtrl',\n            templateUrl: '/idum-ui/app/templates/register.tmpl.html'\n        });\n        $routeProvider.when('/projects', {\n            controller: 'ProjectsListCtrl',\n            templateUrl: '/idum-ui/app/templates/projects.tmpl.html'\n        });\n        $routeProvider.when('/new-project', {\n            controller: 'NewProjectCtrl',\n            templateUrl: '/idum-ui/app/templates/new-project.tmpl.html'\n        });\n        $routeProvider.when('/projects/:projectId', {\n            controller: 'ProjectCtrl',\n            templateUrl: '/idum-ui/app/templates/project-detail.tmpl.html'\n        });\n\n        $locationProvider.html5Mode(true);\n    }]);\n})(angular);","(function (angular) {\n    angular.module(\"app\").controller(\"DialogsCtrl\", [\"$scope\", \"$rootScope\", \"DialogService\", function ($scope, $rootScope, DialogService) {\n\n        $rootScope.$on(\"newFlashNotification\", function () {\n            $scope.flashNotifications = DialogService.flashNotifications;\n        });\n\n        $rootScope.$on(\"newDialog\", function () {\n            $scope.dialogs = DialogService.dialogs;\n        });\n    }]);\n})(angular);","(function (angular) {\n    angular.module(\"app\").controller(\"HeaderCtrl\", [\"$rootScope\", \"$scope\", \"$location\", \"$filter\", function ($rootScope, $scope, $location, $filter) {\n\n        $scope.$on('$routeChangeStart', function (scope, next, current) {});\n    }]);\n})(angular);","(function (angular) {\n    angular.module(\"app\").controller(\"ProjectsListCtrl\", [\"$scope\", \"ProjectService\", \"DialogService\", \"$location\", function ($scope, ProjectService, DialogService, $location) {\n        ProjectService.getProjects().then(function (response) {\n            $scope.projects = response.data;\n        });\n    }]);\n\n    angular.module(\"app\").controller(\"NewProjectCtrl\", [\"$scope\", \"ProjectService\", \"DialogService\", \"$location\", function ($scope, ProjectService, DialogService, $location) {\n        $scope.createProject = function () {\n            ProjectService.createProject($scope.project).then(function (response) {\n                DialogService.sendPositiveNotification(\"Projekt byl úspěšně vytvořen\");\n                $location.path('projects/' + response.data.projectId);\n            });\n        };\n    }]);\n\n    angular.module(\"app\").controller(\"ProjectCtrl\", [\"$scope\", \"ProjectService\", \"DialogService\", \"SensorDataService\", \"$routeParams\", function ($scope, ProjectService, DialogService, SensorDataService, $routeParams) {\n        var projectId = $routeParams.projectId;\n        ProjectService.getProject(projectId).then(function (response) {\n            $scope.project = response.data;\n        });\n\n        $scope.getExtendedData = function (sensor) {\n            sensor.showExtended = true;\n            SensorDataService.getSensorData(sensor.sensorId).then(function (response) {\n                sensor.allValues = response.data;\n            });\n        };\n    }]);\n})(angular);","(function (angular) {\n    angular.module(\"app\").controller(\"SensorDataCtrl\", [\"$scope\", \"SensorDataService\", function ($scope, SensorDataService) {\n        SensorDataService.getSensorData().then(function (response) {\n            $scope.data = response.data;\n        });\n    }]);\n})(angular);","(function (angular) {\n    angular.module(\"app\").controller(\"UserCtrl\", [\"$rootScope\", \"$scope\", \"UserService\", \"DialogService\", function ($rootScope, $scope, UserService, DialogService) {\n        UserService.currentUser().then(function (response) {\n            $rootScope.loggedUser = response.data;\n        });\n\n        $scope.login = function () {\n            console.log($scope.user);\n            UserService.login($scope.user).then(function (response) {\n                var data = response.data;\n                if (data) {\n                    DialogService.sendPositiveNotification(\"LOGIN_OK\");\n                    $rootScope.loggedUser = data;\n                } else DialogService.sendNegativeNotification(\"LOGIN_FAILED\");\n            });\n        };\n\n        $scope.register = function () {\n            UserService.register($scope.user).then(function (response) {\n                console.log(response.data);\n            });\n        };\n    }]);\n})(angular);","(function (angular) {\n    var app = angular.module(\"app\");\n\n    app.directive(\"graph\", [\"$window\", function ($window) {\n        return {\n            restrict: 'E',\n            replace: true,\n            transclude: false,\n            template: \"<div><svg width='200' height='200'></svg></div>\",\n            scope: { data: '=' },\n            link: function (scope, elem, attrs) {\n                scope.$watch('data', function () {\n                    updateGraph();\n                });\n\n                angular.element($window).bind('resize', function () {\n                    updateGraph();\n                });\n\n                function updateGraph() {\n                    if (scope.data == null) {\n                        return;\n                    }\n                    var width = elem[0].clientWidth;\n                    var height = 4 * width / 16;\n                    var svgElement = elem[0].firstChild;\n\n                    svgElement.setAttribute('width', width);\n                    svgElement.setAttribute('height', height);\n\n                    var valueMin = scope.data[0].value;\n                    var valueMax = scope.data[0].value;\n                    for (var key in scope.data) {\n                        if (scope.data.hasOwnProperty(key)) {\n                            if (scope.data[key].value < valueMin) {\n                                valueMin = scope.data[key].value;\n                            } else if (scope.data[key].value > valueMax) {\n                                valueMax = scope.data[key].value;\n                            }\n                        }\n                    }\n\n                    var first = scope.data[0];\n                    var dataLength = scope.data.length;\n                    var last = scope.data[dataLength - 1];\n                    var dateInitial = first.dateInsert;\n                    var dateEnd = last.dateInsert;\n                    var dateRange = dateEnd - dateInitial;\n                    var valueRange = valueMax - valueMin;\n                    var stepX = width / dateRange;\n                    var stepY = height * 0.9 / valueRange;\n                    var points = \"\";\n\n                    for (key in scope.data) {\n                        if (scope.data.hasOwnProperty(key)) {\n                            var d = scope.data[key];\n                            var x = (d.dateInsert - dateInitial) * stepX;\n                            var y = height - (d.value - valueMin) * stepY;\n                            points = points + x + \",\" + y + \" \";\n                        }\n                    }\n\n                    svgElement.innerHTML = '<polyline points=\"' + points + '\" style=\"fill:none;stroke:black;stroke-width:3\"/>';\n                }\n            }\n        };\n    }]);\n})(angular);","(function (angular) {\n    angular.module('app').directive('modalDialog', function () {\n        return {\n            restrict: 'E',\n            replace: true,\n            transclude: true,\n            scope: { shown: '=', action: '=?', negativeAction: '=?', btns: '=?', outputObject: '=?' },\n            templateUrl: 'idum-ui/app/js/directives/templates/modal-dialog.tmpl.html',\n            link: function (scope, elem, attrs) {\n                scope.dialogTexts = {};\n                scope.dialogTexts.title = attrs.title;\n                scope.dialogTexts.content = attrs.content;\n\n                if (attrs.spinner) {\n                    scope.spinner = true;\n                    scope.preventClose = true;\n                }\n\n                if (!scope.btns && attrs.positiveLabel) {\n                    scope.positiveBtn = {\n                        label: attrs.positiveLabel,\n                        class: attrs.positiveClass ? attrs.positiveClass : \"positive\"\n                    };\n                    if (attrs.negativeLabel) {\n                        scope.negativeBtn = {\n                            label: attrs.negativeLabel,\n                            class: attrs.negativeClass ? attrs.negativeClass : \"neutral\"\n                        };\n                        scope.btns = [scope.negativeBtn, scope.positiveBtn];\n                    } else {\n                        scope.btns = [scope.positiveBtn];\n                    }\n                }\n\n                if (!scope.preventClose) {\n                    document.addEventListener('keydown', function (event) {\n                        if (event.keyCode === 27) {\n                            scope.shown = false;\n                            scope.$apply();\n                        }\n                    });\n                }\n\n                scope.close = function () {\n                    if (scope.preventClose) {\n                        return;\n                    }\n                    scope.shown = false;\n                };\n\n                scope.$watch('action', function () {\n                    var positiveBtn = scope.positiveBtn;\n                    if (!positiveBtn) {\n                        return;\n                    }\n                    positiveBtn.action = function () {\n                        scope.shown = false;\n                        if (scope.action) {\n                            scope.action();\n                        }\n                    };\n                });\n\n                scope.$watch('negativeAction', function () {\n                    var negativeBtn = scope.negativeBtn;\n                    if (!negativeBtn) {\n                        return;\n                    }\n                    negativeBtn.action = function () {\n                        scope.shown = false;\n                        if (scope.negativeAction) {\n                            scope.negativeAction();\n                        }\n                    };\n                });\n            }\n        };\n    });\n})(angular);","(function (angular) {\n    angular.module('app').directive('notificationDialog', function () {\n        return {\n            restrict: 'E',\n            replace: true,\n            transclude: true,\n            scope: { shown: '=' },\n            templateUrl: 'idum-ui/app/js/directives/templates/notification-dialog.tmpl.html',\n            link: function (scope, elem, attrs) {\n                scope.title = attrs.title;\n\n                if (!scope.preventClose) {\n                    document.addEventListener('keydown', function (event) {\n                        if (event.keyCode === 27) {\n                            scope.shown = false;\n                            scope.$apply();\n                        }\n                    });\n                }\n\n                scope.close = function () {\n                    if (scope.preventClose) {\n                        return;\n                    }\n                    scope.shown = false;\n                };\n            }\n        };\n    });\n})(angular);","(function (angular) {\n    angular.module(\"app\").service(\"DialogService\", [\"$rootScope\", function ($rootScope) {\n        var dialogs = [];\n        var flashNotifications = [];\n\n        function addFlashNotification(flashNotification, timeout) {\n            if (!timeout) {\n                timeout = 10000;\n            }\n            flashNotifications.forEach(function (flashNotification) {\n                flashNotification.shown = false;\n            });\n            flashNotification.shown = true;\n\n            setTimeout(function () {\n                flashNotification.shown = false;\n                $rootScope.$apply();\n            }, timeout);\n\n            flashNotifications.push(flashNotification);\n            $rootScope.$broadcast(\"newFlashNotification\");\n\n            return flashNotification;\n        }\n\n        function createDialog(dialog) {\n            dialogs.forEach(function (dialog) {\n                dialog.shown = false;\n            });\n\n            dialog.shown = true;\n            dialogs.push(dialog);\n\n            $rootScope.$broadcast(\"newDialog\");\n\n            return dialog;\n        }\n\n        function sendPositiveNotification(title, timeout) {\n            return addFlashNotification({ title: title, type: 'positive' }, timeout);\n        }\n\n        function sendNegativeNotification(title, timeout) {\n            return addFlashNotification({ title: title, type: 'negative' }, timeout);\n        }\n\n        function sendNeutralNotification(title, timeout) {\n            return addFlashNotification({ title: title, type: 'neutral' }, timeout);\n        }\n\n        function sendInfoNotification(title, timeout) {\n            return addFlashNotification({ title: title, type: 'primary' }, timeout);\n        }\n\n        function createLoadingDialog(title) {\n            var dialog = { title: title, spinner: true };\n            return createDialog(dialog);\n        }\n\n        function createConfirmDialog(title, content, action, positiveLabel, negativeLabel, positiveClass, negativeClass) {\n            var dialog = {\n                title: title,\n                content: content,\n                action: action,\n                positiveLabel: positiveLabel,\n                negativeLabel: negativeLabel,\n                positiveClass: positiveClass,\n                negativeClass: negativeClass\n            };\n            return createDialog(dialog);\n        }\n\n        function createDecisionDialog(title, content, positiveAction, negativeAction, positiveLabel, negativeLabel, positiveClass, negativeClass) {\n            var dialog = {\n                title: title,\n                content: content,\n                action: positiveAction,\n                negativeAction: negativeAction,\n                positiveLabel: positiveLabel,\n                negativeLabel: negativeLabel,\n                positiveClass: positiveClass,\n                negativeClass: negativeClass\n            };\n            return createDialog(dialog);\n        }\n\n        return {\n            sendPositiveNotification: sendPositiveNotification,\n            sendNeutralNotification: sendNeutralNotification,\n            sendNegativeNotification: sendNegativeNotification,\n            sendInfoNotification: sendInfoNotification,\n            createLoadingDialog: createLoadingDialog,\n            createConfirmDialog: createConfirmDialog,\n            createDecisionDialog: createDecisionDialog,\n            flashNotifications: flashNotifications,\n            dialogs: dialogs\n        };\n    }]);\n})(angular);","(function (angular) {\n    var app = angular.module(\"app\");\n    app.service(\"ProjectService\", [\"restUrlPrefix\", \"$http\", function (restUrlPrefix, $http) {\n        return {\n            createProject: function (data) {\n                return $http({\n                    method: 'POST',\n                    url: restUrlPrefix + 'projects.php',\n                    data: data\n                });\n            },\n            getProject: function (projectId) {\n                return $http({\n                    method: 'GET',\n                    url: restUrlPrefix + 'projects.php?project_id=' + projectId\n                });\n            },\n            getProjects: function () {\n                return $http({\n                    method: 'GET',\n                    url: restUrlPrefix + 'projects.php'\n                });\n            }\n        };\n    }]);\n})(angular);","(function (angular) {\n    var app = angular.module(\"app\");\n    app.service(\"SensorDataService\", [\"restUrlPrefix\", \"$http\", function (restUrlPrefix, $http) {\n        return {\n            getSensorData: function (sensorId) {\n                return $http({\n                    method: 'GET',\n                    url: restUrlPrefix + 'values.php?sensorId=' + sensorId\n                });\n            },\n            setSensorData: function (data) {\n                return $http({\n                    method: 'POST',\n                    url: restUrlPrefix + 'values.php'\n                });\n            }\n        };\n    }]);\n})(angular);","(function (angular) {\n    var app = angular.module(\"app\");\n    app.service(\"SensorService\", [\"restUrlPrefix\", \"$http\", function (restUrlPrefix, $http) {\n        return {\n            createSensor: function (data) {\n                return $http({\n                    method: 'POST',\n                    url: restUrlPrefix + 'sensors.php',\n                    data: data\n                });\n            },\n            getProjectSensors: function (projectId) {\n                return $http({\n                    method: 'GET',\n                    url: restUrlPrefix + 'sensors.php?projectId=' + projectId\n                });\n            }\n        };\n    }]);\n})(angular);","\n(function (angular) {\n    var app = angular.module(\"app\");\n    app.service(\"UserService\", [\"restUrlPrefix\", \"$http\", function (restUrlPrefix, $http) {\n        return {\n            register: function (user) {\n                return $http({\n                    method: 'POST',\n                    url: restUrlPrefix + 'register.php',\n                    data: user\n                });\n            },\n            login: function (user) {\n                return $http({\n                    method: 'POST',\n                    url: restUrlPrefix + 'login.php',\n                    data: user\n                });\n            },\n            currentUser: function () {\n                return $http({\n                    method: 'GET',\n                    url: restUrlPrefix + 'login.php'\n                });\n            }\n        };\n    }]);\n})(angular);",null]}