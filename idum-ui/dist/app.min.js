!function(t){t.module("app",["ngRoute","textAngular","pascalprecht.translate","ngCookies","ui.bootstrap","ngFileUpload"])}(angular),function(t){var e=t.module("app");e.constant("restUrlPrefix","api/")}(angular),function(t){t.module("app").config(["$routeProvider","$locationProvider",function(t,e){t.when("/login",{controller:"UserCtrl",templateUrl:"/idum-ui/app/templates/login.tmpl.html"}),t.when("/register",{controller:"UserCtrl",templateUrl:"/idum-ui/app/templates/register.tmpl.html"}),t.when("/projects",{controller:"ProjectsListCtrl",templateUrl:"/idum-ui/app/templates/projects.tmpl.html"}),t.when("/new-project",{controller:"NewProjectCtrl",templateUrl:"/idum-ui/app/templates/new-project.tmpl.html"}),t.when("/projects/:projectId",{controller:"ProjectCtrl",templateUrl:"/idum-ui/app/templates/project-detail.tmpl.html"}),e.html5Mode(!0)}])}(angular),function(t){t.module("app").controller("DialogsCtrl",["$scope","$rootScope","DialogService",function(t,e,n){e.$on("newFlashNotification",function(){t.flashNotifications=n.flashNotifications}),e.$on("newDialog",function(){t.dialogs=n.dialogs})}])}(angular),function(t){t.module("app").controller("HeaderCtrl",["$rootScope","$scope","$location","$filter",function(t,e,n,r){e.$on("$routeChangeStart",function(t,e,n){})}])}(angular),function(t){t.module("app").controller("ProjectsListCtrl",["$scope","ProjectService","DialogService","$location",function(t,e,n,r){e.getProjects().then(function(e){t.projects=e.data})}]),t.module("app").controller("NewProjectCtrl",["$scope","ProjectService","DialogService","$location",function(t,e,n,r){t.createProject=function(){e.createProject(t.project).then(function(t){n.sendPositiveNotification("Projekt byl úspěšně vytvořen"),r.path("projects/"+t.data.projectId)})}}]),t.module("app").controller("ProjectCtrl",["$scope","ProjectService","DialogService","SensorDataService","$routeParams",function(t,e,n,r,o){var a=o.projectId;e.getProject(a).then(function(e){t.project=e.data}),t.getExtendedData=function(t){t.showExtended=!0,r.getSensorData(t.sensorId).then(function(e){t.allValues=e.data})}}])}(angular),function(t){t.module("app").controller("SensorDataCtrl",["$scope","SensorDataService",function(t,e){e.getSensorData().then(function(e){t.data=e.data})}])}(angular),function(t){t.module("app").controller("UserCtrl",["$rootScope","$scope","UserService","DialogService",function(t,e,n,r){n.currentUser().then(function(e){t.loggedUser=e.data}),e.login=function(){console.log(e.user),n.login(e.user).then(function(e){var n=e.data;n?(r.sendPositiveNotification("LOGIN_OK"),t.loggedUser=n):r.sendNegativeNotification("LOGIN_FAILED")})},e.register=function(){n.register(e.user).then(function(t){console.log(t.data)})}}])}(angular),function(t){var e=t.module("app");e.directive("graph",["$window",function(e){return{restrict:"E",replace:!0,transclude:!1,template:"<div><svg width='200' height='200'></svg></div>",scope:{data:"="},link:function(n,r,o){function a(){if(null!=n.data){var t=r[0].clientWidth,e=4*t/16,o=r[0].firstChild;o.setAttribute("width",t),o.setAttribute("height",e);var a=n.data[0].value,i=n.data[0].value;for(var l in n.data)n.data.hasOwnProperty(l)&&(n.data[l].value<a?a=n.data[l].value:n.data[l].value>i&&(i=n.data[l].value));var s=n.data[0],c=n.data.length,u=n.data[c-1],p=s.dateInsert,d=u.dateInsert,m=d-p,g=i-a,v=t/m,f=.9*e/g,h="";for(l in n.data)if(n.data.hasOwnProperty(l)){var j=n.data[l],w=(j.dateInsert-p)*v,b=e-(j.value-a)*f;h=h+w+","+b+" "}o.innerHTML='<polyline points="'+h+'" style="fill:none;stroke:black;stroke-width:3"/>'}}n.$watch("data",function(){a()}),t.element(e).bind("resize",function(){a()})}}}])}(angular),function(t){t.module("app").directive("modalDialog",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{shown:"=",action:"=?",negativeAction:"=?",btns:"=?",outputObject:"=?"},templateUrl:"idum-ui/app/js/directives/templates/modal-dialog.tmpl.html",link:function(t,e,n){t.dialogTexts={},t.dialogTexts.title=n.title,t.dialogTexts.content=n.content,n.spinner&&(t.spinner=!0,t.preventClose=!0),!t.btns&&n.positiveLabel&&(t.positiveBtn={label:n.positiveLabel,class:n.positiveClass?n.positiveClass:"positive"},n.negativeLabel?(t.negativeBtn={label:n.negativeLabel,class:n.negativeClass?n.negativeClass:"neutral"},t.btns=[t.negativeBtn,t.positiveBtn]):t.btns=[t.positiveBtn]),t.preventClose||document.addEventListener("keydown",function(e){27===e.keyCode&&(t.shown=!1,t.$apply())}),t.close=function(){t.preventClose||(t.shown=!1)},t.$watch("action",function(){var e=t.positiveBtn;e&&(e.action=function(){t.shown=!1,t.action&&t.action()})}),t.$watch("negativeAction",function(){var e=t.negativeBtn;e&&(e.action=function(){t.shown=!1,t.negativeAction&&t.negativeAction()})})}}})}(angular),function(t){t.module("app").directive("notificationDialog",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{shown:"="},templateUrl:"idum-ui/app/js/directives/templates/notification-dialog.tmpl.html",link:function(t,e,n){t.title=n.title,t.preventClose||document.addEventListener("keydown",function(e){27===e.keyCode&&(t.shown=!1,t.$apply())}),t.close=function(){t.preventClose||(t.shown=!1)}}}})}(angular),function(t){t.module("app").service("DialogService",["$rootScope",function(t){function e(e,n){return n||(n=1e4),p.forEach(function(t){t.shown=!1}),e.shown=!0,setTimeout(function(){e.shown=!1,t.$apply()},n),p.push(e),t.$broadcast("newFlashNotification"),e}function n(e){return u.forEach(function(t){t.shown=!1}),e.shown=!0,u.push(e),t.$broadcast("newDialog"),e}function r(t,n){return e({title:t,type:"positive"},n)}function o(t,n){return e({title:t,type:"negative"},n)}function a(t,n){return e({title:t,type:"neutral"},n)}function i(t,n){return e({title:t,type:"primary"},n)}function l(t){var e={title:t,spinner:!0};return n(e)}function s(t,e,r,o,a,i,l){var s={title:t,content:e,action:r,positiveLabel:o,negativeLabel:a,positiveClass:i,negativeClass:l};return n(s)}function c(t,e,r,o,a,i,l,s){var c={title:t,content:e,action:r,negativeAction:o,positiveLabel:a,negativeLabel:i,positiveClass:l,negativeClass:s};return n(c)}var u=[],p=[];return{sendPositiveNotification:r,sendNeutralNotification:a,sendNegativeNotification:o,sendInfoNotification:i,createLoadingDialog:l,createConfirmDialog:s,createDecisionDialog:c,flashNotifications:p,dialogs:u}}])}(angular),function(t){var e=t.module("app");e.service("ProjectService",["restUrlPrefix","$http",function(t,e){return{createProject:function(n){return e({method:"POST",url:t+"projects.php",data:n})},getProject:function(n){return e({method:"GET",url:t+"projects.php?project_id="+n})},getProjects:function(){return e({method:"GET",url:t+"projects.php"})}}}])}(angular),function(t){var e=t.module("app");e.service("SensorDataService",["restUrlPrefix","$http",function(t,e){return{getSensorData:function(n){return e({method:"GET",url:t+"values.php?sensorId="+n})},setSensorData:function(n){return e({method:"POST",url:t+"values.php"})}}}])}(angular),function(t){var e=t.module("app");e.service("SensorService",["restUrlPrefix","$http",function(t,e){return{createSensor:function(n){return e({method:"POST",url:t+"sensors.php",data:n})},getProjectSensors:function(n){return e({method:"GET",url:t+"sensors.php?projectId="+n})}}}])}(angular),function(t){var e=t.module("app");e.service("UserService",["restUrlPrefix","$http",function(t,e){return{register:function(n){return e({method:"POST",url:t+"register.php",data:n})},login:function(n){return e({method:"POST",url:t+"login.php",data:n})},currentUser:function(){return e({method:"GET",url:t+"login.php"})}}}])}(angular),angular.module("app").run(["$templateCache",function(t){t.put("idum/login.tmpl.html",'<form class="login" data-ng-submit="login()">\n    <input type="text" required data-ng-model="user.username">\n\n    <input type="password" required data-ng-model="user.password">\n\n    <button type="submit">\n        Log in\n    </button>\n</form>\n'),t.put("idum/new-project.tmpl.html",'<h1>\r\n    Nový projekt\r\n</h1>\r\n<form data-ng-submit="createProject()">\r\n    <div class="form-group">\r\n        <label for="projectName">\r\n            Název projektu\r\n        </label>\r\n        <input type="text" id="projectName" data-ng-model="project.projectName">\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="projectDescription">\r\n            Popis projektu\r\n        </label>\r\n        <textarea id="projectDescription" rows="5" data-ng-model="project.projectDescription">\r\n        </textarea>\r\n    </div>\r\n    <div class="btns-bottom">\r\n        <button type="submit" class="btn positive large pull-right ico tick">\r\n            Vytvořit\r\n        </button>\r\n    </div>\r\n</form>\r\n'),t.put("idum/project-detail.tmpl.html",'<h1>\r\n    {{project.projectName}}\r\n</h1>\r\n<p>\r\n    {{project.projectDescription}}\r\n</p>\r\n<h2>\r\n    Senzory\r\n</h2>\r\n<ul>\r\n    <li data-ng-repeat="client in project.clients">\r\n        <h3>{{client.clientName}}</h3>\r\n        <code>{{client.clientKey}}</code>\r\n        <ul>\r\n            <li data-ng-repeat="sensor in client.sensors">\r\n                {{sensor.sensorName}} - {{sensor.lastValue.value ? sensor.lastValue.value : "Neznámá hodnota"}}\r\n                <a data-ng-click="getExtendedData(sensor)">\r\n                    Podrobnosti\r\n                </a>\r\n                <div data-ng-show="sensor.showExtended">\r\n                    <graph style="width: 100%;" data="sensor.allValues">\r\n                    </graph>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </li>\r\n</ul>'),t.put("idum/projects.tmpl.html",'<ul class="preview-list">\r\n    <li data-ng-repeat="project in projects">\r\n        <a data-ng-href="projects/{{project.projectId}}">\r\n            {{project.projectName}}\r\n        </a>\r\n    </li>\r\n</ul>\r\n\r\n<a data-ng-href="new-project">\r\n    Nový projekt\r\n</a>'),t.put("idum/register.tmpl.html",'<form class="register" data-ng-controller="UserCtrl" data-ng-submit="register()">\r\n    <h1>\r\n        Registrace nového uživatele\r\n    </h1>\r\n    <div class="form-group">\r\n        <label for="name">\r\n            Jméno\r\n        </label>\r\n        <input name="name" id="name" type="text" required data-ng-model="user.name">\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="username">\r\n            Uživatelské jméno\r\n        </label>\r\n        <input name="username" id="username" type="text" required data-ng-model="user.username">\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="email">\r\n            Email\r\n        </label>\r\n        <input name="email" id="email" type="email" required data-ng-model="user.email">\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="password">\r\n            Heslo\r\n        </label>\r\n        <input name="password" id="password" type="password" required data-ng-model="user.password">\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="passwordAgain">\r\n            Heslo znovu\r\n        </label>\r\n        <input name="passwordAgain" id="passwordAgain" type="password" required data-ng-model="passwordAgain">\r\n    </div>\r\n    <div class="btns-bottom">\r\n        <button type="submit" class="btn positive ico tick large pull-right">\r\n            Registrovat\r\n        </button>\r\n    </div>\r\n</form>'),t.put("idum/sensor.tmpl.html",'<div data-ng-controller="SensorDataCtrl">\r\n    <graph data="data" style="width: 100%"></graph>\r\n</div>')}]);
//# sourceMappingURL=app.min.js.map
