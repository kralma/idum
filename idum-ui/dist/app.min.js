!function(t){t.module("app",["ngRoute","textAngular","pascalprecht.translate","ngCookies","ui.bootstrap","ngFileUpload"])}(angular),function(t){var e=t.module("app");e.constant("restUrlPrefix","api/")}(angular),function(t){t.module("app").config(["$routeProvider","$locationProvider",function(t,e){t.when("/login",{controller:"UserCtrl",templateUrl:"/idum-ui/app/templates/login.tmpl.html"}),t.when("/register",{controller:"UserCtrl",templateUrl:"/idum-ui/app/templates/register.tmpl.html"}),e.html5Mode(!0)}])}(angular),function(t){t.module("app").controller("DialogsCtrl",["$scope","$rootScope","DialogService",function(t,e,n){e.$on("newFlashNotification",function(){t.flashNotifications=n.flashNotifications}),e.$on("newDialog",function(){t.dialogs=n.dialogs})}])}(angular),function(t){t.module("app").controller("HeaderCtrl",["$rootScope","$scope","$location","$filter",function(t,e,n,a){function i(){var t=n.path().slice(1);e.menuItems.forEach(function(e){e.active=0===t.indexOf(e.url),null!=e.items&&e.items.forEach(function(n){0===t.indexOf(n.url)?(n.active=!0,e.active=!1):n.active=!1})})}e.$on("$routeChangeStart",function(t,n,a){e.menuVisible=!1,i()}),e.menuItems=[{label:"HOME",icon:"home",url:"home",expandable:!1,shown:!0},{label:"PROFILES",icon:"profiles",expandable:!0,shown:!0,expanded:!0,items:[{label:"MY_PROFILES",url:"my-profiles",shown:!1},{label:"INSTITUTES",url:"institutes",shown:!0},{label:"COMPANIES",url:"companies",shown:!0}]},{label:"PROJECTS",icon:"search-assignment",expandable:!0,shown:!0,expanded:!0,items:[{label:"CREATE_FINISHED_PROJECT",url:"create-finished-assignment",shown:!0,hasRole:"ADMIN, REFERENT, TEAM_SUPERVISOR"},{label:"FINISHED_PROJECTS",url:"assignments/finished",shown:!0},{label:"PUBLISHED_ARTICLES",url:"articles",shown:!0}]},{label:"MANAGEMENT",icon:"settings",expandable:!0,shown:!0,expanded:!0,items:[{label:"CREATE_TEAM",url:"create-team",shown:!0},{label:"CREATE_COMPANY",url:"create-company",shown:!0,hasRole:"ADMIN, REFERENT"},{label:"CREATE_INSTITUTE",url:"create-institute",shown:!0,hasRole:"ADMIN"},{label:"FAKE_LOGIN",url:"fake-login",shown:!0,hasRole:"ADMIN"}]}],i()}])}(angular),function(t){t.module("app").controller("SensorDataCtrl",["$scope","SensorDataService",function(t,e){e.getSensorData().then(function(e){t.data=e.data})}])}(angular),function(t){t.module("app").controller("UserCtrl",["$rootScope","$scope","UserService","DialogService",function(t,e,n,a){e.login=function(){n.login(e.user).then(function(e){var n=e.data;n?(a.sendPositiveNotification("LOGIN_OK"),t.loggedUser=n):a.sendNegativeNotification("LOGIN_FAILED")})},e.register=function(){n.register(e.user).then(function(t){console.log(t.data)})}}])}(angular),function(t){var e=t.module("app");e.directive("graph",["$window",function(e){return{restrict:"E",replace:!0,transclude:!1,template:"<div><svg width='200' height='200'></svg></div>",scope:{data:"="},link:function(n,a,i){function o(){if(null!=n.data){var t=a[0].clientWidth,e=4*t/16,i=a[0].firstChild;i.setAttribute("width",t),i.setAttribute("height",e);var o=n.data[0].val,r=n.data[0].val;for(var l in n.data)n.data.hasOwnProperty(l)&&(n.data[l].val<o?o=n.data[l].val:n.data[l].val>r&&(r=n.data[l].val));var s=n.data[0],u=n.data.length,c=n.data[u-1],p=s.date,d=c.date,f=d-p,g=r-o,h=t/f,m=.9*e/g,v="";for(l in n.data)if(n.data.hasOwnProperty(l)){var w=n.data[l],b=(w.date-p)*h,E=e-(w.val-o)*m;v=v+b+","+E+" "}i.innerHTML='<polyline points="'+v+'" style="fill:none;stroke:black;stroke-width:3"/>'}}n.$watch("data",function(){o()}),t.element(e).bind("resize",function(){o()})}}}])}(angular),function(t){t.module("app").directive("modalDialog",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{shown:"=",action:"=?",negativeAction:"=?",btns:"=?",outputObject:"=?"},templateUrl:"idum-ui/app/js/directives/templates/modal-dialog.tmpl.html",link:function(t,e,n){t.dialogTexts={},t.dialogTexts.title=n.title,t.dialogTexts.content=n.content,n.spinner&&(t.spinner=!0,t.preventClose=!0),!t.btns&&n.positiveLabel&&(t.positiveBtn={label:n.positiveLabel,class:n.positiveClass?n.positiveClass:"positive"},n.negativeLabel?(t.negativeBtn={label:n.negativeLabel,class:n.negativeClass?n.negativeClass:"neutral"},t.btns=[t.negativeBtn,t.positiveBtn]):t.btns=[t.positiveBtn]),t.preventClose||document.addEventListener("keydown",function(e){27===e.keyCode&&(t.shown=!1,t.$apply())}),t.close=function(){t.preventClose||(t.shown=!1)},t.$watch("action",function(){var e=t.positiveBtn;e&&(e.action=function(){t.shown=!1,t.action&&t.action()})}),t.$watch("negativeAction",function(){var e=t.negativeBtn;e&&(e.action=function(){t.shown=!1,t.negativeAction&&t.negativeAction()})})}}})}(angular),function(t){t.module("app").directive("notificationDialog",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{shown:"="},templateUrl:"idum-ui/app/js/directives/templates/notification-dialog.tmpl.html",link:function(t,e,n){t.title=n.title,t.preventClose||document.addEventListener("keydown",function(e){27===e.keyCode&&(t.shown=!1,t.$apply())}),t.close=function(){t.preventClose||(t.shown=!1)}}}})}(angular),function(t){t.module("app").service("DialogService",["$rootScope",function(t){function e(e,n){return n||(n=1e4),p.forEach(function(t){t.shown=!1}),e.shown=!0,setTimeout(function(){e.shown=!1,t.$apply()},n),p.push(e),t.$broadcast("newFlashNotification"),e}function n(e){return c.forEach(function(t){t.shown=!1}),e.shown=!0,c.push(e),t.$broadcast("newDialog"),e}function a(t,n){return e({title:t,type:"positive"},n)}function i(t,n){return e({title:t,type:"negative"},n)}function o(t,n){return e({title:t,type:"neutral"},n)}function r(t,n){return e({title:t,type:"primary"},n)}function l(t){var e={title:t,spinner:!0};return n(e)}function s(t,e,a,i,o,r,l){var s={title:t,content:e,action:a,positiveLabel:i,negativeLabel:o,positiveClass:r,negativeClass:l};return n(s)}function u(t,e,a,i,o,r,l,s){var u={title:t,content:e,action:a,negativeAction:i,positiveLabel:o,negativeLabel:r,positiveClass:l,negativeClass:s};return n(u)}var c=[],p=[];return{sendPositiveNotification:a,sendNeutralNotification:o,sendNegativeNotification:i,sendInfoNotification:r,createLoadingDialog:l,createConfirmDialog:s,createDecisionDialog:u,flashNotifications:p,dialogs:c}}])}(angular),function(t){var e=t.module("app");e.service("ProjectService",["restUrlPrefix","$http",function(t,e){return{createProject:function(n){return e({method:"POST",url:t+"projects.php",data:n})},getProject:function(n){return e({method:"GET",url:t+"projects.php?projectId="+n})},getProjects:function(){return e({method:"GET",url:t+"projects.php"})}}}])}(angular),function(t){var e=t.module("app");e.service("SensorDataService",["restUrlPrefix","$http",function(t,e){return{getSensorData:function(n){return e({method:"GET",url:t+"values.php?sensorId="+n})},setSensorData:function(n){return e({method:"POST",url:t+"values.php"})}}}])}(angular),function(t){var e=t.module("app");e.service("SensorService",["restUrlPrefix","$http",function(t,e){return{createSensor:function(n){return e({method:"POST",url:t+"sensors.php",data:n})},getProjectSensors:function(n){return e({method:"GET",url:t+"sensors.php?projectId="+n})}}}])}(angular),function(t){var e=t.module("app");e.service("UserService",["restUrlPrefix","$http",function(t,e){return{register:function(n){return e({method:"POST",url:t+"register.php",data:n})},login:function(n){return e({method:"POST",url:t+"login.php",data:n})},currentUser:function(n){return e({method:"GET",url:t+"login.php"})}}}])}(angular),angular.module("app").run(["$templateCache",function(t){t.put("idum/login.tmpl.html",'<form class="login" data-ng-submit="login()">\n    <input type="text" required data-ng-model="user.username">\n\n    <input type="password" required data-ng-model="user.password">\n\n    <button type="submit">\n        Log in\n    </button>\n</form>\n'),t.put("idum/register.tmpl.html",'<form class="register" data-ng-controller="UserCtrl" data-ng-submit="register()">\r\n    <input type="text" required data-ng-model="user.name">\r\n    <input type="text" required data-ng-model="user.username">\r\n    <input type="email" required data-ng-model="user.email">\r\n    <input type="password" required data-ng-model="user.password">\r\n    <input type="password" required data-ng-model="passwordAgain">\r\n    <button type="submit">\r\n        Sign in\r\n    </button>\r\n</form>'),t.put("idum/sensor.tmpl.html",'<div data-ng-controller="SensorDataCtrl">\r\n    <graph data="data" style="width: 100%"></graph>\r\n</div>')}]);
//# sourceMappingURL=app.min.js.map
